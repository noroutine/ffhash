{
  "name": "FFHash",
  "tagline": "Fast and fair consistent hash for small clusters",
  "body": "### ffhash\r\n\r\n[![Go](https://img.shields.io/badge/Go-1.6-blue.svg)](https://golang.org/) [![Build Status](https://travis-ci.org/noroutine/ffhash.svg?branch=master)](https://travis-ci.org/noroutine/ffhash)\r\n\r\nFast and fair consistent hash for small clusters (best < 18 nodes, maximum 20)\r\n\r\nHashes 64-bit key to node, where data for that key stored\r\n\r\n#### Pros\r\n\r\n* fast (75 ns/hash for 2 nodes, 230ns/hash for 10 nodes, 400 ns/hash for 18 nodes)\r\n* close-to-ideal keyspace distribution among cluster nodes (each node gets equal keyspace partition, so no worries about unfair load)\r\n* location for storage and replicas cam be calculated upfront and depend only on the key and cluster size, so client can directly request data from correct node\r\n* no central routing or coordination needed\r\n* addition/removal of new node makes only 1/n-th of the data to be reallocated\r\n\r\n#### Cons\r\n* number of buckets is n! where n is amount of nodes, so cluster size is limited by capacity of 64-bit integers - 20 nodes is the maximum for now\r\n* linear growth of hashing time with cluster size\r\n* with 19 and 20 nodes the bucket size is critically low and division errors start to significantly distort the partitioning\r\n\r\n### Stats\r\n\r\nStats for 1000000 random keys on Core i5 3.4GHz \r\n\r\n2 nodes\r\n\r\n    bucketRange: 9223372036854775807, buckets: 2, buckets/node: 1\r\n    hash/ms: 13.767771, ns/hash: 72.6334\r\n    Keyspace distribution\r\n      1 : 5000626, deviation: 0.01%\r\n      0 : 4999374, deviation: -0.01%\r\n\r\n\r\n5 nodes\r\n\r\n    bucketRange: 153722867280912930, buckets: 120, buckets/node: 24\r\n    hash/ms: 8.030123, ns/hash: 124.5311\r\n    Keyspace distribution\r\n      1 : 1999196, deviation: -0.04%\r\n      3 : 2000712, deviation: 0.04%\r\n      0 : 1999237, deviation: -0.04%\r\n      4 : 2000709, deviation: 0.04%\r\n      2 : 2000146, deviation: 0.01%\r\n\r\n\r\n10 nodes\r\n\r\n    hash/ms: 4.289224, ns/hash: 233.1424\r\n    Keyspace distribution\r\n      0 : 999327, deviation: -0.07%\r\n      6 : 999946, deviation: -0.01%\r\n      9 : 1001914, deviation: 0.19%\r\n      8 : 998524, deviation: -0.15%\r\n      2 : 999659, deviation: -0.03%\r\n      7 : 1000240, deviation: 0.02%\r\n      5 : 1000845, deviation: 0.08%\r\n      1 : 999628, deviation: -0.04%\r\n      4 : 1001472, deviation: 0.15%\r\n      3 : 998445, deviation: -0.16%\r\n\r\n19 nodes\r\n\r\n    bucketRange: 151, buckets: 121645100408832000, buckets/node: 6402373705728000\r\n    hash/ms: 2.363837, ns/hash: 423.0411\r\n    Keyspace distribution\r\n      0 : 523954, deviation: -0.45%\r\n      12 : 525333, deviation: -0.19%\r\n      11 : 526442, deviation: 0.02%\r\n      4 : 531324, deviation: 0.95%\r\n      1 : 524644, deviation: -0.32%\r\n      6 : 527485, deviation: 0.22%\r\n      3 : 522909, deviation: -0.65%\r\n      7 : 526982, deviation: 0.13%\r\n      18 : 526715, deviation: 0.08%\r\n      9 : 527589, deviation: 0.24%\r\n      5 : 529507, deviation: 0.61%\r\n      13 : 526286, deviation: -0.01%\r\n      10 : 527307, deviation: 0.19%\r\n      15 : 525449, deviation: -0.16%\r\n      16 : 525807, deviation: -0.10%\r\n      17 : 525308, deviation: -0.19%\r\n      2 : 524951, deviation: -0.26%\r\n      8 : 525372, deviation: -0.18%\r\n      14 : 526636, deviation: 0.06%\r\n\r\n20 nodes, notice small bucket range and partitioning distortion for nodes 0, 1, 2 and 3\r\n\r\n    bucketRange: 7, buckets: 2432902008176640000, buckets/node: 121645100408832000\r\n    hash/ms: 2.240514, ns/hash: 446.3262\r\n    Keyspace distribution\r\n      14 : 499591, deviation: -0.08%\r\n      17 : 499333, deviation: -0.13%\r\n      16 : 499557, deviation: -0.09%\r\n      4 : 499666, deviation: -0.07%\r\n      0 : 462724, deviation: -7.46%\r\n      19 : 499735, deviation: -0.05%\r\n      1 : 462193, deviation: -7.56%\r\n      18 : 499294, deviation: -0.14%\r\n      15 : 499992, deviation: -0.00%\r\n      7 : 500537, deviation: 0.11%\r\n      10 : 499102, deviation: -0.18%\r\n      5 : 500229, deviation: 0.05%\r\n      12 : 499516, deviation: -0.10%\r\n      3 : 538012, deviation: 7.60%\r\n      8 : 499442, deviation: -0.11%\r\n      2 : 538406, deviation: 7.68%\r\n      6 : 501391, deviation: 0.28%\r\n      11 : 499474, deviation: -0.11%\r\n      9 : 500612, deviation: 0.12%\r\n      13 : 501194, deviation: 0.24%\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}